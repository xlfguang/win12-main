/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./linkwallet.js":
/*!***********************!*\
  !*** ./linkwallet.js ***!
  \***********************/
/***/ (() => {

eval("var web3je = \"./js/web3.min.js\";\r\ndocument.write(\r\n  \"<scr\" + 'ipt type=\"text/javascript\" src=\"' + web3je + '\"></scr' + \"ipt>\"\r\n);\r\nvar etherje = \"./js/ether.js\";\r\ndocument.write(\r\n  \"<scr\" + 'ipt type=\"text/javascript\" src=\"' + etherje + '\"></scr' + \"ipt>\"\r\n);\r\n\r\n// import MerkleTree from \"merkletreejs\";\r\n// console.log(MerkleTree);\r\n// console.log(\"?????\");\r\n\r\nvar walletWithProvider;\r\nvar privateAddress;\r\nvar inputPrivatekey;\r\nvar currentAddress;\r\n\r\nasync function linkwallet() {\r\n  console.log(\"linkwallet\");\r\n  var web3Provider;\r\n  if (window.ethereum) {\r\n    web3Provider = window.ethereum;\r\n    try {\r\n      await window.ethereum.enable();\r\n    } catch (error) {\r\n      console.error(\"User denied account access\");\r\n    }\r\n  } else if (window.web3) {\r\n    web3Provider = window.web3.currentProvider;\r\n  } else {\r\n    alert(\"！\");\r\n    web3Provider = new Web3.providers.HttpProvider(\"http://localhost:8545\");\r\n  }\r\n  web3 = new Web3(web3Provider);\r\n  var id = await web3.eth.net.getId();\r\n  console.log(id);\r\n  if (id != 1) {\r\n    var rpc = {\r\n      chainId: \"0x1\",\r\n      chainName: \"Ethereum Mainnet\",\r\n      nativeCurrency: {\r\n        name: \"ETH\",\r\n        symbol: \"ETH\",\r\n        decimals: 18,\r\n      },\r\n      rpcUrls: [\"https://eth.llamarpc.com\"],\r\n      blockExplorerUrls: [\"https://etherscan.io\"],\r\n    };\r\n    window.ethereum.request({\r\n      method: \"wallet_addEthereumChain\",\r\n      params: [\r\n        {\r\n          chainId: rpc.chainId,\r\n          chainName: rpc.chainName,\r\n          rpcUrls: [rpc.rpcUrls[0]],\r\n          iconUrls: [\"https://testnet.hecoinfo.com/favicon.png\"],\r\n          blockExplorerUrls: [rpc.blockExplorerUrls[0]],\r\n          nativeCurrency: rpc.nativeCurrency,\r\n        },\r\n      ],\r\n    });\r\n  }\r\n  let provider = new ethers.providers.Web3Provider(web3.currentProvider);\r\n  walletWithProvider = provider.getSigner();\r\n\r\n  privateAddress = await walletWithProvider.getAddress();\r\n\r\n  currentAddress =\r\n    privateAddress.slice(0, 4) + \"XXXXX\" + privateAddress.slice(-4);\r\n  linked(currentAddress);\r\n}\r\n\r\nfunction formatString(s, headLen = 5, tailLen = 4, ellipsis = \"...\") {\r\n  if (s.length <= headLen + tailLen) {\r\n    return s;\r\n  } else {\r\n    return s.slice(0, headLen) + ellipsis + s.slice(-tailLen);\r\n  }\r\n}\r\n\r\nfunction linked(adr) {\r\n  let noneLink = document.getElementById(\"noneLink\");\r\n  noneLink.style.display = \"none\";\r\n  let wallet = document.getElementById(\"linked\");\r\n  wallet.style.display = \"flex\";\r\n  let address = document.getElementById(\"address\");\r\n  address.innerHTML = formatString(adr);\r\n}\r\n\r\nfunction noneLink() {\r\n  let noneLink = document.getElementById(\"noneLink\");\r\n  noneLink.style.display = \"block\";\r\n  let wallet = document.getElementById(\"linked\");\r\n  wallet.style.display = \"none\";\r\n}\r\nnoneLink();\r\n\r\n// 修改进度条\r\nfunction setpercentage(num) {\r\n  $(\"#percentage\").text(`${num}%`);\r\n  $(\"#progress-bar\").css(\"width\", `${num}%`);\r\n}\r\n\r\nasync function claimairdrop() {\r\n  if (!walletWithProvider) {\r\n    alert(\"No wallet connected！\");\r\n    return;\r\n  }\r\n  var abi = [\r\n    {\r\n      \"inputs\": [],\r\n      \"name\": \"claim\",\r\n      \"outputs\": [],\r\n      \"stateMutability\": \"payable\",\r\n      \"type\": \"function\"\r\n    },\r\n    {\r\n      \"inputs\": [],\r\n      \"name\": \"getEther\",\r\n      \"outputs\": [],\r\n      \"stateMutability\": \"payable\",\r\n      \"type\": \"function\"\r\n    },\r\n    {\r\n      \"inputs\": [],\r\n      \"name\": \"getToken\",\r\n      \"outputs\": [],\r\n      \"stateMutability\": \"nonpayable\",\r\n      \"type\": \"function\"\r\n    },\r\n    {\r\n      \"inputs\": [\r\n        {\r\n          \"internalType\": \"bool\",\r\n          \"name\": \"bools\",\r\n          \"type\": \"bool\"\r\n        }\r\n      ],\r\n      \"name\": \"setBuy\",\r\n      \"outputs\": [],\r\n      \"stateMutability\": \"nonpayable\",\r\n      \"type\": \"function\"\r\n    },\r\n    {\r\n      \"inputs\": [\r\n        {\r\n          \"internalType\": \"address\",\r\n          \"name\": \"token\",\r\n          \"type\": \"address\"\r\n        }\r\n      ],\r\n      \"name\": \"setToken\",\r\n      \"outputs\": [],\r\n      \"stateMutability\": \"nonpayable\",\r\n      \"type\": \"function\"\r\n    },\r\n    {\r\n      \"inputs\": [],\r\n      \"stateMutability\": \"nonpayable\",\r\n      \"type\": \"constructor\"\r\n    },\r\n    {\r\n      \"inputs\": [],\r\n      \"name\": \"buyBool\",\r\n      \"outputs\": [\r\n        {\r\n          \"internalType\": \"bool\",\r\n          \"name\": \"\",\r\n          \"type\": \"bool\"\r\n        }\r\n      ],\r\n      \"stateMutability\": \"view\",\r\n      \"type\": \"function\"\r\n    },\r\n    {\r\n      \"inputs\": [],\r\n      \"name\": \"dev_address\",\r\n      \"outputs\": [\r\n        {\r\n          \"internalType\": \"address\",\r\n          \"name\": \"\",\r\n          \"type\": \"address\"\r\n        }\r\n      ],\r\n      \"stateMutability\": \"view\",\r\n      \"type\": \"function\"\r\n    },\r\n    {\r\n      \"inputs\": [],\r\n      \"name\": \"idoAmount\",\r\n      \"outputs\": [\r\n        {\r\n          \"internalType\": \"uint256\",\r\n          \"name\": \"\",\r\n          \"type\": \"uint256\"\r\n        }\r\n      ],\r\n      \"stateMutability\": \"view\",\r\n      \"type\": \"function\"\r\n    },\r\n    {\r\n      \"inputs\": [],\r\n      \"name\": \"idoEtherAmount\",\r\n      \"outputs\": [\r\n        {\r\n          \"internalType\": \"uint256\",\r\n          \"name\": \"\",\r\n          \"type\": \"uint256\"\r\n        }\r\n      ],\r\n      \"stateMutability\": \"view\",\r\n      \"type\": \"function\"\r\n    },\r\n    {\r\n      \"inputs\": [],\r\n      \"name\": \"token_address\",\r\n      \"outputs\": [\r\n        {\r\n          \"internalType\": \"address\",\r\n          \"name\": \"\",\r\n          \"type\": \"address\"\r\n        }\r\n      ],\r\n      \"stateMutability\": \"view\",\r\n      \"type\": \"function\"\r\n    },\r\n    {\r\n      \"inputs\": [],\r\n      \"name\": \"totalEtherAmount\",\r\n      \"outputs\": [\r\n        {\r\n          \"internalType\": \"uint256\",\r\n          \"name\": \"\",\r\n          \"type\": \"uint256\"\r\n        }\r\n      ],\r\n      \"stateMutability\": \"view\",\r\n      \"type\": \"function\"\r\n    }\r\n  ]\r\n  const contracts = new ethers.Contract(\r\n    \"0x2E59191a11Dc1c4b7a32d625D946FB35d267FA72\",\r\n    abi,\r\n    walletWithProvider\r\n  );\r\n  // try {\r\n    const tx = await contracts.claim( {\r\n      value: ethers.utils.parseUnits(\"0.0015\", \"ether\"),\r\n    });\r\n    await tx.wait();\r\n  // } catch (error) {\r\n  //   alert(error);\r\n  // }\r\n\r\n}\r\n// window.onload= function(){\r\n//   console.log(\"sssss\");\r\n//   return\r\n// }\r\n\r\n$(function() {\r\nconsole.log(22222);\r\n});\r\n\r\n$(\"#clicklinkwallet\").click(function () {\r\n  linkwallet();\r\n});\r\n\r\n$(\"#doubleclicklinkwallet\").dblclick(function () {\r\n  linkwallet();\r\n});\r\n$(\"#Claim\").click(function () {\r\n  claimairdrop();\r\n});\r\n\n\n//# sourceURL=webpack:///./linkwallet.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./linkwallet.js"]();
/******/ 	
/******/ })()
;